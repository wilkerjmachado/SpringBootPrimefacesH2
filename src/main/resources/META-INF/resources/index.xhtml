<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pm="http://primefaces.org/mobile">
     
    <f:view renderKitId="PRIMEFACES_MOBILE" />
     
    <h:head>

    </h:head>
     
    <h:body>
         
        <pm:page id="list">
            <pm:header title="Lista de perguntas" swatch="b">
                <p:commandButton styleClass="ui-btn-right ui-btn-inline" value="Nova pergunta" icon="ui-icon-plus" update="edit:editForm:editFormPanel" action="#{enqueteController.novaEntidade}"/>
            </pm:header>
             
            <pm:content>
                <h:form id="listForm">
                    <p:dataList id="contactsList" value="#{enqueteController.formulario.lista}" var="entidade" pt:data-inset="true">
                        <p:commandLink value="#{entidade.texto}" update="edit:editForm:editFormPanel" action="pm:edit?transition=flip">
                            <f:setPropertyActionListener value="#{entidade}" target="#{enqueteController.formulario.entidade}" />
                        </p:commandLink> 
                    </p:dataList>
                </h:form>
            </pm:content>
        </pm:page>
         
        <pm:page id="edit">
            <pm:header title="Nova pergunta" swatch="b">
                <p:button styleClass="ui-btn-left ui-btn-inline" value="Voltar" icon="ui-icon-arrow-l" outcome="pm:list?transition=flip"/>
            </pm:header>
             
            <pm:content>
                <h:form id="editForm">
                    <p:outputPanel id="editFormPanel">
                        <pm:field>
                            <p:outputLabel for="texto" value="Pergunta: " />
                            <p:inputText id="texto" value="#{enqueteController.formulario.entidade.texto}" />
                        </pm:field>
 
                    </p:outputPanel>
                     
                    <p:commandButton value="Salvar" action="#{enqueteController.salvar}" update="list:listForm:contactsList" icon="ui-icon-check"/>
                </h:form>
                 
            </pm:content>
        </pm:page>
         
    </h:body>
     
</html>